//  $(document).ready(function(){
//       $("#jquery_jplayer_1").jPlayer({
//         ready: function () {
//            $(this).jPlayer("setMedia", {
//                 m4a: "http://media.rawvoice.com/officialaviciipodcast/media2-av.podtree.com/media/podcast/AVICII_LEVELS_-_EPISODE_017.m4a",
//             }) // auto play
//         },
//         swfPath: ".",
//         supplied: "m4a"
//       }); 
// });
var player;
var playerInstance;
var current_podcast_id;


$(function() {
    $('#jp-pause').hide();

	$(document).on('click','.podcast', function() {
			var $this = $(this);

			// Show Pause button first
			$('#jp-pause').show();
			if(player == null) {
				player = $("#jquery_jplayer_1").jPlayer({
			        ready: function () {
			           $(this).jPlayer("setMedia", {
			                m4a: $this.data('link')
			            }).jPlayer("play"); // auto play
			        },
			        solution: " html, flash",
			        swfPath: "./Jplayer.swf",
			        supplied: "m4a"
		      }); 

		} 
		else {
			player.jPlayer("setMedia", {
	                m4a: $this.data('link')
	            }).jPlayer("play"); // auto play
		}
		
    playerInstance = $('#playerInstance').clone();
	console.log($this.data('link'));

	});


	$(document).on('click', '.podcast_item', function(){
		current_podcast = $(this);
		$.ajax({
			url: '/play.js?id='+ current_podcast.data('id')
		});
	});



    $(document).on('click', '.jp-next', function(){
    	current_podcast = current_podcast.next();

		$.ajax({
			url: '/play.js?id='+ current_podcast.data('id')
		});
    });

     $(document).on('click', '.jp-previous', function(){
     	current_podcast = current_podcast.prev();

		$.ajax({
			url: '/play.js?id='+ current_podcast.data('id')
		});
    });







});

